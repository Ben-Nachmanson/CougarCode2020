<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script defer src="js/main.js"></script>
    <script src="webgazer.js" type="text/javascript"></script> 
    
    <title>Eye-Tac-Toe</title>
</head>
<body>
    <h1>Eye-Tac-Toe<h1> 
    <h2>X's Turn</h2> 

    <script>
        var xprediction;
        var yprediction;
        webgazer.setGazeListener(function(data, elapsedTime) {
            if (data == null) {
                return;
            }
            xprediction = data.x; 
            yprediction = data.y; 
            //console.log(xprediction + ", " + yprediction); 
        }).setRegression('ridge').setTracker('clmtrackr').begin().showPredictionPoints(true);
        webgazer.params.useWebGL = false;
        document.addEventListener("keypress",fakeClick, true);
        function fakeClick(e) {
            console.log("key press");
            if (xprediction != null && yprediction != null) {
            document.elementFromPoint(xprediction, yprediction).click()
            }
        
        }
        
        
    </script>
    <!-- <script>
    const log = document.getElementById('log');
    document.addEventListener('keypress', logKey);

        function logkey(e) {
            console.log('${e.code}');
        }
    </script> -->

    <div class="flex-container flex-column">
        <div class="flex-container flex-wrap" id="board">
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        </div>
        <button id="reset-button">reset</button>
    </div>
</body>
</html>